<!DOCTYPE html>
<html lang="pt" ng-app="listaTelefonica">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lista Telefonica</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css"
      integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/app.css">
    
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-messages.js"></script>

    <script src="js/app.js"></script>
    <script src="js/controllers/listaTelefonicaController.js"></script>

  </head>
  <body ng-controller="listaTelefonicaController">
    <div class="jumbotron">
      <h3>{{app}}</h3>
      <input class="form-control" type="text" ng-model="criterioDeBusca" placeholder="O que você esta buscando?"/>
      <table class="table" ng-show="contatos.length > 0">
        <tr>
          <th></th>
          <th><a href="" ng-click="ordenarPor('nome')">Nome</a> </th>
          <th><a href="" ng-click="ordenarPor('telefone')">Telefone</a></th>
          <th>Operadora</th>
          <th></th>
        </tr>
        <tr
          ng-class="{'selecionado negrito': contato.selecionado}"
          ng-repeat="contato in contatos | filter: {nome: criterioDeBusca} | orderBy: criterioDeOrdenacao: direcaoOrdenacao"
        >
          <td><input type="checkbox" ng-model="contato.selecionado" /></td>
          <td>{{contato.nome | uppercase}}</td>
          <td>{{contato.telefone}}</td>
          <td>{{contato.operadora.nome}}</td>
          <td ng-style="{'background-color': contato.cor}"><div></div></td>
        </tr>
      </table>

      <form name="contatoForm">
        <input
          class="form-control"
          type="text"
          ng-model="contato.nome"
          name="nome"
          placeholder="Nome"
          ng-required="true"
          ng-minlength="10"
        />
        <input
          class="form-control"
          type="text"
          ng-model="contato.telefone"
          name="telefone"
          placeholder="Telefone - Ex: 99999-6565"
          ng-required="true"
          ng-pattern="/^\d{4,5}-\d{4}$/"
        />
        <select
          class="form-control"
          ng-model="contato.operadora"
          ng-options="operadora.nome group by operadora.categoria for operadora in operadoras | orderBy: 'nome'"
        >
          >
          <option value="">Selecione uma operadora</option>
        </select>
      </form>
      <div
        class="alert"
        ng-class="{'alert-success': contatoForm.$valid, 'alert-danger': contatoForm.$invalid}"
      >
        Compos do form ng-required são válidos: {{contatoForm.$valid}}
      </div>
      <div ng-messages="contatoForm.nome.$error">
        <div class="alert alert-danger" ng-message="required">
          Preencha o campo Nome
        </div>
        <div class="alert alert-danger" ng-message="minlength">
          O campo nome deve ter pelo menos 10 caracteres
        </div>
      </div>

      <div class="alert alert-danger" ng-show="contatoForm.telefone.$invalid">
        Preencha o campo Telefone
      </div>
      <div
        class="alert alert-warning"
        ng-show="contatoForm.telefone.$error.pattern"
      >
        Campo Telefone de ter este formato 99999-9999
      </div>
      <div
        class="alert alert-warning"
        ng-show="contatoForm.nome.$invalid && contatoForm.nome.$dirty"
      >
        Campo Nome preenchido e apagado
      </div>
      <button
        class="btn btn-primary btn-block"
        ng-click="adicionarContato(contato)"
        ng-disabled="contatoForm.$invalid"
      >
        Adicionar Contato
      </button>
      <button
        class="btn btn-danger btn-block"
        ng-click="apagarContatos(contatos)"
        ng-show="isContatoSelecionado(contatos)"
      >
        Apagar Contato
      </button>
      <!-- {{contatos}} -->
    </div>
    <div ng-include="'view/footer.html'"></div>
  </body>
</html>
